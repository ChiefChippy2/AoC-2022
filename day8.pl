use List::Util qw(max);
#$_=`dd`;$n=y/\n//;$N=$n-1;s/(?<=(.).{$N}(.))(?<!\n)\S(?!\n)(?=(.).{$N}(.))/print"$& $1 $2 $3 $4 ",min($1,$2,$3,$4)>=$&?NO:OK,"
#";$i+=(min($1,$2,$3,$4)>=$&?0:1)/sger;print$i
# RIP
#sub f{($p,$s,$e,$K,$m)=@_;max(map{$p=~/y/?$h{"$_ $K"}:$h{"$K $_"}}$s..$e)<$m}; #PT 1
sub f{($p,$s,$e,$K,$m)=@_;$f=$D=0;grep{$T=$p=~/y/?$h{"$_ $K"}:$h{"$K $_"};$T>=$m?$f||=++$D:$D++}($s?$s..$e:reverse($s..$e));$f||$D}
$_=`dd`;$n=y/\n//;$N=$n-1;$y=$i/$n|0,$x=$i%$n,($h{"$y $x"}=$_),$i++for/\S/g;s/(?<=(.).{$N}(.))(?<!\n)\S(?!\n)(?=(.).{$N}(.))/$j=length$`;
($jy,$jx)=($j\/($n+1)|0,$j%($n+1));
"PT 1 $d+=((f('y',0,$jy-1,$jx,$&))||(f('y',$jy+1,$n-1,$jx,$&))||(f('x',0,$jx-1,$jy,$&))||(f('x',$jx+1,$n-1,$jy,$&)));";
$d=max($d,(f('y',0,$jy-1,$jx,$&))*(f('y',$jy+1,$n-1,$jx,$&))*(f('x',0,$jx-1,$jy,$&))*(f('x',$jx+1,$n-1,$jy,$&)));/egirls;print$d;