#($p+=/Z/?3:/Y/?2:1),($p+=/A X/||/B Y/||/C Z/?3:/A Y/||/B Z/||/C X/?6:0) for<>;print$p
($p+=/Z/?6:/Y/?3:0),($p+=/Y/?(/C/?3:/B/?2:1):/X/?(/C/?2:/B/?1:3):(/C/?1:/B/?3:2)) for<>;print$p

#nb this is about the worst way you can solve this, but i did this at the end of a very long day